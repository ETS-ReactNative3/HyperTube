(this.webpackJsonphypertube=this.webpackJsonphypertube||[]).push([[0],{11:function(e,t){var a=function(e){return!1===/^[A-z]{3,15}$/.test(e)?"this field can only contain between 3 and 15 alphabetical chars.":""},n=function(e){return!1===/^[A-z0-9-_]{5,20}$/.test(e)?"this field can only contain between 5 and 20 alphanumeric chars.":""},s=function(e){return!1===/[a-z0-9-_.]{1,50}@[a-z0-9-_.]{1,50}\.[a-z0-9]{2,10}$/.test(e)?"Invalid email address":""},r=function(e){return!1===/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,36})/.test(e)?"Your password should contain at least one capital latter and one number and should be between {8-36} char.":""},c=function(e,t){return e===t?"":"Your password doesn't match passowrd confirmation."};t.validateRegisterData=function(e,t,o){return"fname"===e||"lname"===e?a(t):"username"===e?n(t):"email"===e?s(t):"password"===e?r(t):"passwordConfirmation"===e?c(t,o):void 0},t.validateLoginData=function(e,t){return"username"===e?n(t):"password"===e?r(t):void 0},t.validateEmail=s,t.validateResetPassword=function(e,t,a){return"password"===e?r(t):"passwordConfirmation"===e?c(t,a):void 0},t.validateEditData=function(e,t,r){return"fname"===e||"lname"===e?a(t):"username"===e?n(t):"email"===e?s(t):"bio"===e?function(e){return!1===/^[A-z0-9-_ ]{5,300}$/.test(e)?"Your bio should contain between 5 and 300 chars, digits and ( space | - | _ )":""===e.trim()?"Invalid bio":""}(t):void 0},t.validateChangePassword=function(e,t,a){return"password"===e||"oldPassword"===e?r(t):"passwordConfirmation"===e?c(t,a):void 0},t.validateSearchData=function(e){try{return e.length<1||e.length>50?"invalid search sentence":""}catch(t){return""}},t.validateComment=function(e){try{return e.length<1||e.length>500?"invalid comment":""}catch(t){return""}}},57:function(e,t,a){e.exports=a(96)},67:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(25),c=a.n(r),o=a(10),l=a(27),i={isLogged:!1,lang:"EN"},u=function(e,t){return 1===t?{isLogged:!0,lang:e.lang}:{isLogged:!1,lang:e.lang}};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHENTICATE":return u(e,t.payload);default:return e}},p=Object(l.b)(m,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),h=a(1),d=a.n(h),f=a(3),v=a(4),g=a(6),E=a(5),b=a(7),w=a(8),N=a(22),k=(a(67),a(68),a(69),function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",{className:"navbar navbar-dark navbar-expand-lg h-navbar h-navbar-abs"},s.a.createElement("div",{className:"container"},s.a.createElement(w.b,{to:"/",className:"navbar-brand logo"},"Hyper",s.a.createElement("span",null,"Tube")),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},s.a.createElement("div",{className:"navbar-nav ml-auto"},s.a.createElement(w.b,{to:"/Register",className:"nav-item nav-link h-nav-btn"},"Register"),s.a.createElement(w.b,{to:"/login",className:"nav-item nav-link h-nav-btn h-btn-primary"},"Login")))))}}]),t}(n.Component)),y=a(2),x=a.n(y),C=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(s)))).logout=function(){try{x.a.delete("/api/user/logout").then((function(e){a.props.Logout()})).catch((function(e){a.props.Logout()}))}catch(e){a.props.Logout()}},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("nav",{className:"navbar navbar-dark navbar-expand-lg h-navbar h-navbar-abs"},s.a.createElement("div",{className:"container"},s.a.createElement(w.b,{to:"/",className:"navbar-brand logo"},"Hyper",s.a.createElement("span",null,"Tube")),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},s.a.createElement("div",{className:"navbar-nav ml-auto"},s.a.createElement(w.c,{to:"/Movies",className:"nav-item nav-link h-nav-btn"},"Movies"),s.a.createElement(w.c,{to:"/Profile",className:"nav-item nav-link h-nav-btn"},"Profile"),s.a.createElement(w.c,{to:"/Settings",className:"nav-item nav-link h-nav-btn"},"Settings "),s.a.createElement("button",{onClick:this.logout,className:"nav-item nav-link h-nav-btn h-btn-primary"}," Logout "))))))}}]),t}(n.Component),O=Object(o.b)(null,(function(e){return{Logout:function(){e({type:"AUTHENTICATE"})}}}))(C),j=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return this.props.isLogged?s.a.createElement(O,null):s.a.createElement(k,null)}}]),t}(n.Component),S=Object(o.b)((function(e){return e}))(j),M=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"homepage"},s.a.createElement(S,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-8 col-md-12 col-sm-12 col-12 h-section"},s.a.createElement("div",{className:"h-content"},s.a.createElement("h1",{className:"h-title"},"Wecolme To Hypertube"),s.a.createElement("p",{className:"h-text"},"HyperTube is one of the best  free platforms that exists just to provide you with a great movie watching experience, you can watch the latest movies with all types drama comedy action  and  tv shows with a high quality and speed we have a great list of the best watched movies of all the time with no subscription charges.",s.a.createElement("br",null)," if u are new here join us now and let\u2019s start watching your favorite movies :)"),this.props.isLogged?s.a.createElement("div",{className:"row h-btn-holder"},s.a.createElement(w.b,{to:"/Movies",className:"btn h-btn h-btn-primary h-fsize-1 mr-3"}," Explore ")):s.a.createElement("div",{className:"row h-btn-holder"},s.a.createElement(w.b,{to:"/Register",className:"btn h-btn h-btn-secondary h-fsize-1 mr-3"}," Register "),s.a.createElement(w.b,{to:"/login",className:"btn h-btn h-btn-primary h-fsize-1"}," Login ")))))))}}]),t}(n.Component),P=Object(o.b)((function(e){return e}))(M);function L(){return s.a.createElement("div",{className:"h-footer"},s.a.createElement("div",{className:"content"},"Copyright ifarahi, ybennada, hellbouaz & ysalahed"))}var A=a(12),T=a(11),D=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).state={Checked:0},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.awrap(x.a.get("/api/user"));case 3:return 200===e.sent.status&&this.props.Authenticate(),e.next=7,d.a.awrap(this.setState({Checked:1}));case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),this.props.Logout(),e.next=14,d.a.awrap(this.setState({Checked:1}));case 14:case"end":return e.stop()}}),null,this,[[0,9]])}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,1===this.state.Checked&&!0===this.props.isLogged?s.a.createElement(N.a,{to:"/"}):null)}}]),t}(n.Component),I=Object(o.b)((function(e){return e}),(function(e){return{Authenticate:function(t){e({type:"AUTHENTICATE",payload:1})},Logout:function(){e({type:"AUTHENTICATE",payload:0})}}}))(D),R=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).goBack=function(){var e=a.props.history;e&&e.push("/")},a.onChange=function(e){var t,n,s,r;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.target.name,n=e.target.value,s=Object(T.validateLoginData)(t,n),c.next=5,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 5:a.state.errors[t]!==s&&((r=a.state.errors)[t]=s,a.setState({errors:r}));case 6:case"end":return c.stop()}}))},a.login=function(){try{x.a.post("api/user/login",{username:a.state.username,password:a.state.password}).then((function(e){if(200===e.status)if(e.data.success)a.setState({status:1,statusMessage:"You have logged in successfully"}),a.props.Authenticate();else if(e.data.error)a.setState({status:-1,statusMessage:e.data.error});else if(e.data.errors){var t="";Object.keys(e.data.errors).forEach((function(a){t+="".concat(e.data.errors[a]," ")})),a.setState({status:-1,statusMessage:t})}})).catch((function(e){a.setState({status:-1,statusMessage:"Something went wrong!"})}))}catch(e){a.setState({status:-1,statusMessage:"Couldn't connect to the server"})}},a.onSubmit=function(){var e=a.checkErrors(),t=a.checkData();e||t||a.login()},a.checkData=function(){var e=1;return Object.keys(a.state).forEach((function(t){a.state.username&&a.state.password&&(e=0)})),e},a.checkErrors=function(){var e=0;return Object.keys(a.state.errors).forEach((function(t){""!==a.state.errors[t]&&(e=1)})),e},a.renderError=function(e){return a.state.errors[e]?s.a.createElement("small",{className:"form-text h-error"},a.state.errors[e]):null},a.state={status:0,statusMessage:"",username:"",password:"",errors:{username:"",password:""}},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Loginpage"},s.a.createElement(I,null),!0===this.props.isLogged?s.a.createElement(N.a,{to:"/"}):null,s.a.createElement("button",{className:"h-btn-close",onClick:this.goBack},s.a.createElement("i",{className:"far fa-times"})),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"h-logo-main"},"Hyper",s.a.createElement("span",null,"Tube")),0!==this.state.status?s.a.createElement("div",{className:"h-status-response ".concat(1===this.state.status?"h-success":"h-failure")}," ",this.state.statusMessage," "):null,s.a.createElement("input",{type:"text",className:"form-control mt-5 h-input",name:"username",placeholder:"Username",onChange:this.onChange,value:this.state.username}),this.renderError("username"),s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",name:"password",placeholder:"Password",onChange:this.onChange,value:this.state.password}),this.renderError("password"),s.a.createElement("button",{className:"h-btn-sblock h-btn-primary mt-5",onClick:this.onSubmit}," Login "),s.a.createElement("small",{className:"h-links mt-4"},s.a.createElement(w.b,{to:"/Register",className:"h-link"},"Create an account"),",",s.a.createElement(w.b,{to:"/Resetpassword",className:"h-link"}," Reset your password"),s.a.createElement("br",null),s.a.createElement("a",{href:"/api/user/google",className:"h-link"}," Login using google, "),s.a.createElement("a",{href:"/api/user/intra",className:"h-link"}," Login using intra "))))))))}}]),t}(n.Component),_=Object(o.b)((function(e){return e}),(function(e){return{Authenticate:function(){e({type:"AUTHENTICATE",payload:1})}}}))(R),H=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).register=function(){try{x.a.post("/api/user",{username:a.state.username,mail:a.state.email,lastName:a.state.lname,firstName:a.state.fname,password:a.state.password,passwordRe:a.state.passwordConfirmation}).then((function(e){if(200===e.status)if(e.data.success)a.setState({status:1,statusMessage:"Your account has been created successfully please check your email to confirm your account"});else if(e.data.error)a.setState({status:-1,statusMessage:e.data.error});else if(e.data.errors){var t="";Object.keys(e.data.errors).forEach((function(a){t+="".concat(e.data.errors[a]," ")})),a.setState({status:-1,statusMessage:t})}})).catch((function(e){a.setState({status:-1,statusMessage:"Something went wrong!"})}))}catch(e){a.setState({status:-1,statusMessage:"Couldn't connect to the server"})}},a.goBack=function(){var e=a.props.history;e&&e.push("/")},a.onChange=function(e){var t,n,s,r;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.target.name,n=e.target.value,s="",s="passwordConfirmation"===t?Object(T.validateRegisterData)(t,n,a.state.password):Object(T.validateRegisterData)(t,n),c.next=6,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 6:a.state.errors[t]!==s&&((r=a.state.errors)[t]=s,a.setState({errors:r}));case 7:case"end":return c.stop()}}))},a.onSubmit=function(){var e=a.checkErrors(),t=a.checkData();e||t||a.register()},a.checkData=function(){var e=0;return Object.keys(a.state).forEach((function(t){"errors"!==t&&"statusMessage"!==t&&"status"!==t&&""===a.state[t]?e=1:a.state.passwordConfirmation!==a.state.password&&(e=1)})),e},a.checkErrors=function(){var e=0;return Object.keys(a.state.errors).forEach((function(t){""!==a.state.errors[t]&&(e=1)})),e},a.renderError=function(e){return a.state.errors[e]?s.a.createElement("small",{className:"form-text h-error"},a.state.errors[e]):null},a.state={status:0,statusMessage:"",username:"",fname:"",lname:"",email:"",password:"",passwordConfirmation:"",errors:{username:"",fname:"",lname:"",email:"",password:"",passwordConfirmation:""}},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Registerpage"},s.a.createElement(I,null),s.a.createElement("button",{className:"h-btn-close",onClick:this.goBack},s.a.createElement("i",{className:"far fa-times"})),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content mt-5"},s.a.createElement("p",{className:"h-logo-main mt-5"},"Hyper",s.a.createElement("span",null,"Tube")),0!==this.state.status?s.a.createElement("div",{className:"h-status-response ".concat(1===this.state.status?"h-success":"h-failure")}," ",this.state.statusMessage," "):null,s.a.createElement("input",{type:"text",className:"form-control mt-5 h-input",name:"username",placeholder:"Username",value:this.state.username,onChange:this.onChange}),this.renderError("username"),s.a.createElement("input",{type:"text",className:"form-control mt-5 h-input",name:"fname",placeholder:"First name",value:this.state.fname,onChange:this.onChange}),this.renderError("fname"),s.a.createElement("input",{type:"text",className:"form-control mt-5 h-input",name:"lname",placeholder:"Last name",value:this.state.lname,onChange:this.onChange}),this.renderError("lname"),s.a.createElement("input",{type:"email",className:"form-control mt-5 h-input",name:"email",placeholder:"Email",value:this.state.email,onChange:this.onChange}),this.renderError("email"),s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange}),this.renderError("password"),s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",name:"passwordConfirmation",placeholder:"Password confirmation",value:this.state.passwordConfirmation,onChange:this.onChange}),this.renderError("passwordConfirmation"),s.a.createElement("button",{className:"h-btn-sblock h-btn-primary mt-5",onClick:this.onSubmit}," Register "),s.a.createElement("small",{className:"h-links mt-4"},"Already have an account?",s.a.createElement(w.b,{to:"/Login",className:"h-link"}," login here."),s.a.createElement("br",null),s.a.createElement("a",{href:"/api/user/google",className:"h-link"}," Sign up using google, "),s.a.createElement("a",{href:"/api/user/intra",className:"h-link"}," Sign up using intra "))))))))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).goBack=function(){var e=a.props.history;e&&e.push("/")},a.reset=function(){try{x.a.post("api/user/reset/password",{mail:a.state.email}).then((function(e){if(200===e.status)if(e.data.success)a.setState({status:1,statusMessage:"We've sent you an email with the recovery link to your email address"});else if(e.data.error)a.setState({status:-1,statusMessage:e.data.error});else if(e.data.errors){var t="";Object.keys(e.data.errors).forEach((function(a){t+="".concat(e.data.errors[a]," ")})),a.setState({status:-1,statusMessage:t})}})).catch((function(e){a.setState({status:-1,statusMessage:"Something went wrong!"})}))}catch(e){a.setState({status:-1,statusMessage:"Couldn't connect to the server"})}},a.onChange=function(e){var t,n,s;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.target.name,n=e.target.value,s=Object(T.validateEmail)(n),r.next=5,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 5:a.state.error!==s&&a.setState({error:s});case 6:case"end":return r.stop()}}))},a.onSubmit=function(){var e=a.checkErrors(),t=a.checkData();e||t||a.reset()},a.checkData=function(){return""===a.state.email?1:0},a.checkErrors=function(){return""===a.state.error?0:1},a.renderError=function(e){return a.state.error?s.a.createElement("small",{className:"form-text h-error"},a.state.error):null},a.state={status:0,statusMessage:"",email:"",error:""},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Resetpage"},s.a.createElement(I,null),s.a.createElement("button",{className:"h-btn-close",onClick:this.goBack},s.a.createElement("i",{className:"far fa-times"})),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"h-logo-main"},"Hyper",s.a.createElement("span",null,"Tube")),0!==this.state.status?s.a.createElement("div",{className:"h-status-response ".concat(1===this.state.status?"h-success":"h-failure")}," ",this.state.statusMessage," "):null,s.a.createElement("input",{type:"email",className:"form-control mt-5 h-input",placeholder:"Email",name:"email",onChange:this.onChange,value:this.state.email}),this.renderError("email"),s.a.createElement("small",{className:"h-links mt-4"}," Please Enter your email address"),s.a.createElement("button",{className:"h-btn-sblock h-btn-primary mt-5",onClick:this.onSubmit}," Reset ")))))))}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).goBack=function(){var e=a.props.history;e&&e.push("/")},a.onChange=function(e){var t,n,s,r;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.target.name,n=e.target.value,s=Object(T.validateResetPassword)(t,n,a.state.password),c.next=5,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 5:a.state.errors[t]!==s&&((r=a.state.errors)[t]=s,a.setState({errors:r}));case 6:case"end":return c.stop()}}))},a.reset=function(){try{x.a.patch("/api/user/reset/password",{token:a.state.token,password:a.state.password,passwordRe:a.state.passwordConfirmation}).then((function(e){if(200===e.status)if(e.data.success)a.setState({status:1,statusMessage:"Your password has been changed"});else if(e.data.error)a.setState({status:-1,statusMessage:e.data.error});else if(e.data.errors){var t="";Object.keys(e.data.errors).forEach((function(a){t+="".concat(e.data.errors[a]," ")})),a.setState({status:-1,statusMessage:t})}})).catch((function(e){a.setState({status:-1,statusMessage:"Something went wrong!"})}))}catch(e){a.setState({status:-1,statusMessage:"Couldn't connect to the server"})}},a.onSubmit=function(){var e=a.checkErrors(),t=a.checkData();e||t||a.reset()},a.checkData=function(){var e=0;return Object.keys(a.state).forEach((function(t){"errors"!==t&&"status"!==t&&"statusMessage"!==t&&""===a.state[t]?e=1:a.state.passwordConfirmation!==a.state.password&&(e=1)})),e},a.checkErrors=function(){var e=0;return Object.keys(a.state.errors).forEach((function(t){""!==a.state.errors[t]&&(e=1)})),e},a.renderError=function(e){return a.state.errors[e]?s.a.createElement("small",{className:"form-text h-error"},a.state.errors[e]):null},a.state={status:0,statusMessage:"",password:"",passwordConfirmation:"",token:"",errors:{password:"",passwordConfirmation:""}},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.token&&this.setState({token:this.props.match.params.token})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Resetpage"},s.a.createElement(I,null),s.a.createElement("button",{className:"h-btn-close",onClick:this.goBack},s.a.createElement("i",{className:"far fa-times"})),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"h-logo-main"},"Hyper",s.a.createElement("span",null,"Tube")),0!==this.state.status?s.a.createElement("div",{className:"h-status-response ".concat(1===this.state.status?"h-success":"h-failure")}," ",this.state.statusMessage," "):null,s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",placeholder:"Password",name:"password",onChange:this.onChange,value:this.state.password}),this.renderError("password"),s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",placeholder:"Password confirmation",name:"passwordConfirmation",onChange:this.onChange,value:this.state.passwordConfirmation}),this.renderError("passwordConfirmation"),s.a.createElement("button",{className:"h-btn-sblock h-btn-primary mt-5",onClick:this.onSubmit}," Save ")))))))}}]),t}(n.Component),B=a(38),U=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).state={Checked:0},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.awrap(x.a.get("/api/user"));case 3:return 200===e.sent.status&&this.props.Authenticate(),e.next=7,d.a.awrap(this.setState({Checked:1}));case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),this.props.Logout(),e.next=14,d.a.awrap(this.setState({Checked:1}));case 14:case"end":return e.stop()}}),null,this,[[0,9]])}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,1===this.state.Checked&&!1===this.props.isLogged?s.a.createElement(N.a,{to:"/"}):null)}}]),t}(n.Component),W=Object(o.b)((function(e){return e}),(function(e){return{Authenticate:function(t){e({type:"AUTHENTICATE",payload:1})},Logout:function(){e({type:"AUTHENTICATE",payload:0})}}}))(U);var Y=function(e){return e.title&&e.play?e.cover?s.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 movie-card",style:{backgroundImage:"url(".concat(e.cover,")")}},s.a.createElement("div",{className:"data"}),s.a.createElement("div",{className:"data"},s.a.createElement("p",{className:"movie-title"},e.title),s.a.createElement("p",{className:"production-year"},"Prod-Year: ",s.a.createElement("span",null," ",e.year," ")),s.a.createElement("p",{className:"imdb-rating"},"Rating: ",s.a.createElement("span",null," ",e.rating)),s.a.createElement("p",{className:"imdb-rating"},"Imdb_code: ",s.a.createElement("span",null," ",e.code," ")),s.a.createElement("p",{className:"imdb-rating"},"Seen: ",s.a.createElement("span",null," ",e.watched?"Yes":"No"," ")),s.a.createElement("div",{className:"btn-play",onClick:function(){return e.play(e.code)}}," Watch ")),s.a.createElement("div",{className:"title"},s.a.createElement("p",null,e.title))):s.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 movie-card"},s.a.createElement("div",{className:"data"}),s.a.createElement("div",{className:"data"},s.a.createElement("p",{className:"movie-title"},e.title),s.a.createElement("p",{className:"production-year"},"Prod-Year: ",s.a.createElement("span",null," ",e.year," ")),s.a.createElement("p",{className:"imdb-rating"},"Rating: ",s.a.createElement("span",null," ",e.rating)),s.a.createElement("p",{className:"imdb-rating"},"Imdb_code: ",s.a.createElement("span",null," ",e.code," ")),s.a.createElement("p",{className:"imdb-rating"},"Seen: ",s.a.createElement("span",null," ",e.watched?"Yes":"No"," ")),s.a.createElement("div",{className:"btn-play",onClick:function(){return e.play(e.code)}}," Watch ")),s.a.createElement("div",{className:"title"},s.a.createElement("p",null,e.title))):null};function V(e){if(!e.movies||0===e.movies.length)return null;var t=e.movies.map((function(t,a){return t.poster?s.a.createElement(Y,{key:a,title:t.title,cover:t.poster,code:t.imdb_code,year:t.productionYear,rating:t.imdb_grade,play:e.play,watched:t.watched}):s.a.createElement(Y,{key:a,title:t.title,code:t.imdb_code,year:t.productionYear,rating:t.imdb_grade,play:e.play,watched:t.watched})}));return s.a.createElement("div",{className:"row no-gutters"},t)}var X=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).playMovie=function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e&&""!==e&&a.props.history.push("/movie/".concat(e));case 1:case"end":return t.stop()}}))},a.loadMovies=function(){var e,t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.a.awrap(x.a.get("/api/movies?page=".concat(a.state.currentPage,"&sort=").concat(a.state.sortFilter,"&genre=").concat(a.state.filter)));case 3:if(!((e=n.sent).data.data&&e.data.data.length>0)){n.next=9;break}return t=[].concat(Object(B.a)(a.state.movies),Object(B.a)(e.data.data)),n.next=8,d.a.awrap(a.setState({movies:t,currentPage:a.state.currentPage+1}));case 8:return n.abrupt("return",e.data.data.length);case 9:n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}}),null,null,[[0,11]])},a.onChange=function(e){var t,n,s;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.target.name,n=e.target.value,s="",r.next=6,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 6:if("search"===t&&(s=Object(T.validateSearchData)(n)),"search"!==t||a.state.error===s){r.next=10;break}return r.next=10,d.a.awrap(a.setState({error:s}));case 10:if("filter"!==t&&"sortFilter"!==t){r.next=15;break}return r.next=13,d.a.awrap(a.setState({currentPage:1,movies:[]}));case 13:return r.next=15,d.a.awrap(a.loadMovies());case 15:r.next=19;break;case 17:r.prev=17,r.t0=r.catch(0);case 19:case"end":return r.stop()}}),null,null,[[0,17]])},a.renderError=function(){return a.state.error?s.a.createElement("small",{className:"form-text h-error h-t-center t-center"},a.state.error):null},a.search=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.state.error||""===a.state.search){t.next=13;break}return t.next=4,d.a.awrap(x.a.get("/api/search?title=".concat(a.state.search)));case 4:if(200!==(e=t.sent).status){t.next=13;break}if(!e.data.data){t.next=11;break}return t.next=9,d.a.awrap(a.setState({movies:e.data.data,canScroll:0}));case 9:t.next=13;break;case 11:return t.next=13,d.a.awrap(a.setState({canScroll:1}));case 13:t.next=17;break;case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}}),null,null,[[0,15]])},a.state={currentPage:1,sortFilter:"seeds",movies:[],movie:"",search:"",error:"",canScroll:1,filter:"",currentMovie:""},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(this.loadMovies());case 2:window.addEventListener("scroll",(function(){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.canScroll){t.next=4;break}if(!(window.innerHeight+window.scrollY>=document.body.offsetHeight)){t.next=4;break}return t.next=4,d.a.awrap(e.loadMovies());case 4:case"end":return t.stop()}}))}));case 3:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return s.a.createElement("div",null,""!==this.state.movie?s.a.createElement(w.b,{to:"/movie/".concat(this.state.movie)}):null,s.a.createElement(W,null),s.a.createElement(S,null),s.a.createElement("div",{className:"load-more",onClick:this.loadMovies}," ",s.a.createElement("i",{className:"fas fa-spinner"})," "),s.a.createElement("div",{className:"search-container"},s.a.createElement("div",{className:"container"},s.a.createElement("p",{className:"h-title"},"Looking for a movie?"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-8 col-sm-8 col-md-6 col-lg-4 m-auto"},s.a.createElement("div",{className:"content"},s.a.createElement("input",{type:"text",className:"form-control h-input h-search mb-1",placeholder:"Movie name",value:this.state.search,name:"search",onChange:this.onChange}),this.renderError(),1===this.state.canScroll?s.a.createElement("div",{className:"t-center"},s.a.createElement("select",{className:"h-input-select mt-4",onChange:this.onChange,name:"sortFilter",defaultValue:"sortBy"},s.a.createElement("option",{disabled:!0},"sortBy"),s.a.createElement("option",null,"seeds"),s.a.createElement("option",null,"title"),s.a.createElement("option",null,"rating")),s.a.createElement("select",{className:"h-input-select mt-4",onChange:this.onChange,name:"filter",defaultValue:"filterBy"},s.a.createElement("option",{disabled:!0},"All"),s.a.createElement("option",null,"Action"),s.a.createElement("option",null,"Adventure"),s.a.createElement("option",null,"Animation"),s.a.createElement("option",null,"Biography"),s.a.createElement("option",null,"Comedy"),s.a.createElement("option",null,"Crime"),s.a.createElement("option",null,"Documentary"),s.a.createElement("option",null,"Drama"),s.a.createElement("option",null,"Family"),s.a.createElement("option",null,"Fantasy"),s.a.createElement("option",null,"History"),s.a.createElement("option",null,"Horror"),s.a.createElement("option",null,"Music"),s.a.createElement("option",null,"Musical"),s.a.createElement("option",null,"Mystery"),s.a.createElement("option",null,"Romance"),s.a.createElement("option",null,"Sci-Fi"),s.a.createElement("option",null,"Sport"),s.a.createElement("option",null,"Thriller"),s.a.createElement("option",null,"War"),s.a.createElement("option",null,"Western"))):null,s.a.createElement("button",{className:"btn h-btn-primary h-fsize-1 mt-5",onClick:this.search}," Search ")))))),s.a.createElement(V,{movies:this.state.movies,play:this.playMovie}))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).loadUserProfile=function(e){var t,n,s,r,c,o,l,i;return d.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,d.a.awrap(x.a.get("/api/user/username/".concat(e)));case 3:if(200!==(t=u.sent).status){u.next=8;break}return n=t.data,s=n.username,r=n.firstName,c=n.lastName,o=n.bio,l=n.id,i=n.image,u.next=8,d.a.awrap(a.setState({username:s,fname:r,lname:c,bio:o,id:l,image:i}));case 8:u.next=13;break;case 10:u.prev=10,u.t0=u.catch(0),a.props.history.push("/");case 13:case"end":return u.stop()}}),null,null,[[0,10]])},a.loadPersonalProfile=function(){var e,t,n,s,r,c,o,l;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d.a.awrap(x.a.get("/api/user"));case 3:if(200!==(e=i.sent).status){i.next=8;break}return t=e.data,n=t.username,s=t.fname,r=t.lname,c=t.bio,o=t.id,l=t.image,i.next=8,d.a.awrap(a.setState({username:n,fname:s,lname:r,bio:c,id:o,image:l}));case 8:i.next=12;break;case 10:i.prev=10,i.t0=i.catch(0);case 12:case"end":return i.stop()}}),null,null,[[0,10]])},a.loadImage=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(x.a.get("/api/user/image/".concat(a.state.id)));case 3:if(200!==(e=t.sent).status){t.next=8;break}if(!e.data.image){t.next=8;break}return t.next=8,d.a.awrap(a.setState({image:e.data.image}));case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),null,null,[[0,10]])},a.state={id:-1,fname:"",lname:"",email:"",bio:"",image:""},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.props.match.params.id){e.next=6;break}return e.next=4,d.a.awrap(this.loadUserProfile(this.props.match.params.id));case 4:e.next=8;break;case 6:return e.next=8,d.a.awrap(this.loadPersonalProfile());case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,d.a.awrap(this.loadPersonalProfile());case 14:case"end":return e.stop()}}),null,this,[[0,10]])}},{key:"render",value:function(){return s.a.createElement("div",{className:"Profilepage"},s.a.createElement(W,null),s.a.createElement(S,null),s.a.createElement("div",{className:"h-header-profile"}),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"profile-picture m-auto"},s.a.createElement("div",{className:"picture",style:{backgroundImage:"url(".concat(this.state.image,")")}})),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"data"},s.a.createElement("p",{className:"name"},"".concat(this.state.fname," ").concat(this.state.lname)),s.a.createElement("p",{className:"username"},this.state.username),s.a.createElement("p",{className:"h-description"},this.state.bio)))))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).onChange=function(e){var t,n,s,r;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.target.name,n=e.target.value,s=Object(T.validateEditData)(t,n),c.next=5,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 5:a.state.errors[t]!==s&&((r=a.state.errors)[t]=s,a.setState({errors:r}));case 6:case"end":return c.stop()}}))},a.onChangeLang=function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("english"!==(t=e.target.value)&&"french"!==t){n.next=4;break}return n.next=4,d.a.awrap(a.setState({lang:t}));case 4:case"end":return n.stop()}}))},a.updateData=function(){var e,t,n;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e="english"===a.state.lang?"en":"fr",console.log(e),s.prev=2,s.next=5,d.a.awrap(x.a.patch("/api/user/",{username:a.state.username,lastName:a.state.lname,firstName:a.state.fname,mail:a.state.email,bio:a.state.bio,lang:e}));case 5:if(200!==(t=s.sent).status){s.next=25;break}if(!t.data.success){s.next=12;break}return s.next=10,d.a.awrap(a.setState({status:1,statusMessage:"Your profile data has been updated!"}));case 10:s.next=23;break;case 12:if(!t.data.error){s.next=17;break}return s.next=15,d.a.awrap(a.setState({status:-1,statusMessage:t.data.error}));case 15:s.next=23;break;case 17:if(!t.data.errors){s.next=23;break}return n="",Object.keys(t.data.errors).forEach((function(e){n+="".concat(t.data.errors[e]," ")})),s.next=23,d.a.awrap(a.setState({status:-1,statusMessage:n}));case 23:s.next=27;break;case 25:return s.next=27,d.a.awrap(a.setState({status:-1,statusMessage:"Somethimg wemt wrong!"}));case 27:s.next=33;break;case 29:return s.prev=29,s.t0=s.catch(2),s.next=33,d.a.awrap(a.setState({status:-1,statusMessage:"Something went wrong!"}));case 33:case"end":return s.stop()}}),null,null,[[2,29]])},a.onSubmit=function(){var e=a.checkErrors(),t=a.checkData();e||t||a.updateData()},a.checkData=function(){var e=0;return Object.keys(a.state).forEach((function(t){"errors"!==t&&"statusMessage"!==t&&"status"!==t&&"id"!==t&&"image"!==t&&""===a.state[t]&&(e=1)})),e},a.checkErrors=function(){var e=0;return Object.keys(a.state.errors).forEach((function(t){""!==a.state.errors[t]&&(e=1)})),e},a.renderError=function(e){return a.state.errors[e]?s.a.createElement("small",{className:"form-text h-error"},a.state.errors[e]):null},a.loadImage=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(x.a.get("/api/user/image/".concat(a.state.id)));case 3:if(200!==(e=t.sent).status){t.next=8;break}if(!e.data.image){t.next=8;break}return t.next=8,d.a.awrap(a.setState({image:e.data.image}));case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),null,null,[[0,10]])},a.uploadImage=function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(t=new FormData).append("image",e),n.next=5,d.a.awrap(x.a.put("/api/user/image",t));case 5:if(200!==n.sent.status){n.next=13;break}return n.next=9,d.a.awrap(a.loadImage());case 9:return n.next=11,d.a.awrap(a.setState({statusMessage:"Your profile picture has been update",status:1}));case 11:n.next=15;break;case 13:return n.next=15,d.a.awrap(a.setState({statusMessage:"Can't update your profile picture",status:-1}));case 15:n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(0),n.next=21,d.a.awrap(a.setState({statusMessage:"Something went wrong",status:-1}));case 21:case"end":return n.stop()}}),null,null,[[0,17]])},a.changeEvent=function(e){var t,n;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.target.files[0],n=new FileReader,!t){s.next=20;break}if(!(t.size<5)){s.next=8;break}return s.next=6,d.a.awrap(a.setState({statusMessage:"Worning! Please select a valid image",status:-1}));case 6:s.next=20;break;case 8:if(!t.type.startsWith("image/")){s.next=18;break}if(!(t.size<=4e6)){s.next=14;break}n.onloadend=function(e){var n;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:(n=new Image).onload=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(a.uploadImage(t));case 2:case"end":return e.stop()}}))},n.onerror=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(a.setState({statusMessage:"Worning! Please select a valid image",status:-1}));case 2:case"end":return e.stop()}}))},n.src=e.target.result;case 4:case"end":return s.stop()}}))},n.readAsDataURL(t),s.next=16;break;case 14:return s.next=16,d.a.awrap(a.setState({statusMessage:"Worning! Image should be 4M at max",status:-1}));case 16:s.next=20;break;case 18:return s.next=20,d.a.awrap(a.setState({statusMessage:"Worning! Please select a valid image",status:-1}));case 20:case"end":return s.stop()}}))},a.state={id:-1,image:null,status:0,statusMessage:"",username:"",fname:"",lname:"",email:"",lang:"",bio:"",errors:{username:"",fname:"",lname:"",email:"",bio:""}},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,s,r,c,o,l,i;return d.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,d.a.awrap(x.a.get("/api/user"));case 3:if(200!==(e=u.sent).status){u.next=8;break}return t=e.data,a=t.username,n=t.fname,s=t.lname,r=t.email,c=t.bio,o=t.id,l=t.image,i=t.lang,u.next=8,d.a.awrap(this.setState({username:a,fname:n,lname:s,email:r,bio:c,lang:i,id:o,image:l}));case 8:u.next=12;break;case 10:u.prev=10,u.t0=u.catch(0);case 12:case"end":return u.stop()}}),null,this,[[0,10]])}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"Editpage"},s.a.createElement(W,null),s.a.createElement(S,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mt-5"},s.a.createElement("div",{className:"col-lg-6 col-md-8 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content mt-5"},s.a.createElement("p",{className:"h-logo-main mt-5"},s.a.createElement("span",null,"Settings")),0!==this.state.status?s.a.createElement("div",{className:"h-status-response mb-5 ".concat(1===this.state.status?"h-success":"h-failure")}," ",this.state.statusMessage," "):null,s.a.createElement("div",{className:"edit-profile-picture m-auto"},s.a.createElement("div",{className:"picture",style:{backgroundImage:"url(".concat(this.state.image,")")}},s.a.createElement("input",{type:"file",className:"edit-input",id:"inputGroupFile01",ref:function(t){return e.inputRef=t},onChange:this.changeEvent}),s.a.createElement("label",{className:"edit-label",htmlFor:"inputGroupFile01"}))),s.a.createElement("input",{type:"text",className:"form-control mt-5 h-input",placeholder:"Username",name:"username",value:this.state.username,onChange:this.onChange}),this.renderError("username"),s.a.createElement("input",{type:"text",className:"form-control mt-5 h-input",placeholder:"First name",name:"fname",value:this.state.fname,onChange:this.onChange}),this.renderError("fname"),s.a.createElement("input",{type:"text",className:"form-control mt-5 h-input",placeholder:"Last name",name:"lname",value:this.state.lname,onChange:this.onChange}),this.renderError("lname"),s.a.createElement("input",{type:"email",className:"form-control mt-5 h-input",placeholder:"Email",name:"email",value:this.state.email,onChange:this.onChange}),this.renderError("email"),s.a.createElement("textarea",{className:"form-control mt-5 h-input h-text-area mt-5",name:"bio",cols:"30",rows:"3",value:this.state.bio,onChange:this.onChange}),this.renderError("bio"),s.a.createElement("div",{className:"t-center"},s.a.createElement("select",{className:"h-input-select mt-4",onChange:this.onChangeLang,name:"sortFilter",defaultValue:"sortBy"},s.a.createElement("option",{disabled:!0},"Prefered language"),s.a.createElement("option",null,"en"===this.state.lang?"english":"french"),s.a.createElement("option",null,"en"!==this.state.lang?"english":"french"))),s.a.createElement("button",{className:"h-btn-sblock h-btn-primary mt-5",onClick:this.onSubmit}," Save "),s.a.createElement("small",{className:"h-links mt-4"},s.a.createElement(w.b,{to:"/settings/password",className:"h-link"},"Change your password"))))))))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).changePassword=function(){var e,t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.a.awrap(x.a.patch("/api/user/password",{old:a.state.oldPassword,password:a.state.password,passwordRe:a.state.passwordConfirmation}));case 3:if(200!==(e=n.sent).status){n.next=23;break}if(!e.data.success){n.next=10;break}return n.next=8,d.a.awrap(a.setState({status:1,statusMessage:"Your password has been updated!"}));case 8:n.next=21;break;case 10:if(!e.data.error){n.next=15;break}return n.next=13,d.a.awrap(a.setState({status:-1,statusMessage:e.data.error}));case 13:n.next=21;break;case 15:if(!e.data.errors){n.next=21;break}return t="",Object.keys(e.data.errors).forEach((function(a){t+="".concat(e.data.errors[a]," ")})),n.next=21,d.a.awrap(a.setState({status:-1,statusMessage:t}));case 21:n.next=25;break;case 23:return n.next=25,d.a.awrap(a.setState({status:-1,statusMessage:"Somethimg wemt wrong!"}));case 25:n.next=31;break;case 27:return n.prev=27,n.t0=n.catch(0),n.next=31,d.a.awrap(a.setState({status:-1,statusMessage:"Something went wrong!"}));case 31:case"end":return n.stop()}}),null,null,[[0,27]])},a.onChange=function(e){var t,n,s,r;return d.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.target.name,n=e.target.value,s="",s="passwordConfirmation"===t?Object(T.validateChangePassword)(t,n,a.state.password):Object(T.validateChangePassword)(t,n),c.next=6,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 6:a.state.errors[t]!==s&&((r=a.state.errors)[t]=s,a.setState({errors:r}));case 7:case"end":return c.stop()}}))},a.onSubmit=function(){var e=a.checkErrors(),t=a.checkData();e||t||a.changePassword()},a.checkData=function(){var e=0;return Object.keys(a.state).forEach((function(t){"errors"!==t&&"statusMessage"!==t&&"status"!==t&&""===a.state[t]?e=1:a.state.password!==a.state.passwordConfirmation&&(e=1)})),e},a.checkErrors=function(){var e=0;return Object.keys(a.state.errors).forEach((function(t){""!==a.state.errors[t]&&(e=1)})),e},a.renderError=function(e){return a.state.errors[e]?s.a.createElement("small",{className:"form-text h-error"},a.state.errors[e]):null},a.state={status:0,statusMessage:"",oldPassword:"",password:"",passwordConfirmation:"",errors:{oldPassword:"",password:"",passwordConfirmation:""}},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Editpage"},s.a.createElement(W,null),s.a.createElement(S,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content"},s.a.createElement("p",{className:"h-logo-main"},s.a.createElement("span",null,"Settings")),0!==this.state.status?s.a.createElement("div",{className:"h-status-response ".concat(1===this.state.status?"h-success":"h-failure")}," ",this.state.statusMessage," "):null,s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",placeholder:"Old Password",name:"oldPassword",value:this.state.oldPassword,onChange:this.onChange}),this.renderError("oldPassword"),s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",placeholder:"New Password",name:"password",value:this.state.password,onChange:this.onChange}),this.renderError("password"),s.a.createElement("input",{type:"password",className:"form-control mt-5 h-input",placeholder:"Password Confirmation",name:"passwordConfirmation",value:this.state.passwordConfirmation,onChange:this.onChange}),this.renderError("passwordConfirmation"),s.a.createElement("button",{className:"h-btn-sblock h-btn-primary mt-5",onClick:this.onSubmit}," Change ")))))))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).state={status:0},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!((e=this.props.match.params.token)&&e.length>2&&0!==e)){a.next=16;break}return a.next=5,d.a.awrap(x.a.patch("/api/user/activation",{token:e}));case 5:if(200!==(t=a.sent).status||!t.data.success){a.next=12;break}return a.next=9,d.a.awrap(this.setState({status:1}));case 9:this.props.history.push("/login"),a.next=14;break;case 12:return a.next=14,d.a.awrap(this.setState({status:-1}));case 14:a.next=18;break;case 16:return a.next=18,d.a.awrap(this.setState({status:-1}));case 18:a.next=24;break;case 20:return a.prev=20,a.t0=a.catch(0),a.next=24,d.a.awrap(this.setState({status:-1}));case 24:case"end":return a.stop()}}),null,this,[[0,20]])}},{key:"render",value:function(){return s.a.createElement("div",{className:"Confrimationpage"},s.a.createElement(I,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"h-logo-main"},s.a.createElement("span",null,1===this.state.status?"Account has been activated":-1===this.state.status?"Invalid token":"Confirming your email address..."))))))))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).goBack=function(){var e=a.props.history;e&&e.push("/")},a.login=function(e,t){try{x.a.get("/api/user/".concat(e,"/auth").concat(t)).then((function(e){200===e.status?(a.setState({status:1,statusMessage:"Connected!"}),a.props.Authenticate(1)):a.setState({status:-1,statusMessage:"Cannot authorize"})})).catch((function(e){a.setState({status:-1,statusMessage:"Cannot authorize"})}))}catch(n){a.setState({status:-1,statusMessage:"Cannot connect please try again later!"})}},a.state={status:0,statusMessage:"Connecting..."},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.platform.toLowerCase();if("intra"===e||"google"===e){var t=window.location.search;this.login(e,t)}else this.setState({status:-1,statusMessage:"Invalid option"})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Loginpage"},s.a.createElement(I,null),s.a.createElement("button",{className:"h-btn-close",onClick:this.goBack},s.a.createElement("i",{className:"far fa-times"})),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-lg-6 col-md-6 col-12 m-auto"},s.a.createElement("div",{className:"h-input-card"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"h-logo-main"},"Hyper",s.a.createElement("span",null,"Tube")),s.a.createElement("small",{className:"h-links h-fsize mt-4"},s.a.createElement("p",null,this.state.statusMessage),-1===this.state.status?s.a.createElement("small",{className:"h-links"},"Try again ",s.a.createElement(w.b,{to:"/Login",className:"h-link"}," here.")):null)))))))}}]),t}(n.Component),K=Object(o.b)(null,(function(e){return{Authenticate:function(t){e({type:"AUTHENTICATE",payload:t})}}}))(Z);function Q(e){return 0!==e.genres.length?s.a.createElement("div",{className:"tags mt-4"},e.genres.map((function(e,t){return function(e,t){return s.a.createElement("p",{key:t,className:"tag"}," ",e," ")}(e,t)}))):null}function ee(e){return s.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 col-lg-4 mt-5"},s.a.createElement("div",{className:"mirror",onClick:function(){e.Play(e.Hash)}},s.a.createElement("p",null,"Peers ",s.a.createElement("span",null," ",e.Peers," ")),s.a.createElement("p",null,"Seeds ",s.a.createElement("span",null," ",e.Seeds," ")),s.a.createElement("p",null,"Size ",s.a.createElement("span",null," ",e.Size," "))))}function te(e){var t=e.data.map((function(t,a){return s.a.createElement(ee,{key:a,Peers:t.peers,Seeds:t.seeds,Size:t.size,Play:e.play,Hash:t.hash})}));return 0!==e.data.length?s.a.createElement("div",{className:"mirrors"},s.a.createElement("div",{className:"row"},t)):null}function ae(e){return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"comment-card"},s.a.createElement("div",{className:"profile-picture",style:{backgroundImage:"url(".concat(e.image,")")},onClick:function(){return e.visit(e.author)}}),s.a.createElement("div",{className:"comment-message"},s.a.createElement("p",{className:"username"},e.author),s.a.createElement("p",{className:"content"},e.data))),s.a.createElement("div",{className:"comment-footer"},s.a.createElement("div",{className:"Like",onClick:function(){return e.like(e.commentId)}},1!==e.likes?e.likes+" likes":e.likes+" like")))}function ne(e){if(e.commentsList){var t=e.commentsList.map((function(t,a){return s.a.createElement(ae,{key:a,commentId:t._id,data:t.body,author:t.author.username,image:t.author.imagePath,likes:t.votes.length,like:e.like,visit:e.visit})}));return 0!==t.length?s.a.createElement("div",{className:"comments"},s.a.createElement("div",{className:"container"},t)):null}return null}var se=function(e){return e.title?e.cover?s.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 actor-card",style:{backgroundImage:"url(".concat(e.cover,")")}},s.a.createElement("div",{className:"title"},s.a.createElement("p",null,e.title))):s.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 actor-card"},s.a.createElement("div",{className:"title"},s.a.createElement("p",null,e.title))):null};function re(e){if(!e.list||0===e.list.length)return null;var t=e.list.map((function(e,t){return null!==e.profile_path?s.a.createElement(se,{key:t,title:e.name,cover:"https://image.tmdb.org/t/p/w500".concat(e.profile_path)}):s.a.createElement(se,{key:t,title:e.name})}));return s.a.createElement("div",{className:"actors"},s.a.createElement("div",{className:"row no-gutters"},t))}var ce=a(56),oe=a.n(ce),le=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(g.a)(this,Object(E.a)(t).call(this,e))).playMovie=function(e){a.setState({movie:e}),a.setToWatched()},a.setToWatched=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a.props.match.params.code){e.next=4;break}return e.next=4,d.a.awrap(x.a.post("/api/watch",{imdbid:a.props.match.params.code}));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),null,null,[[0,6]])},a.onComment=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===a.state.comment||""!==a.state.error){e.next=10;break}return e.next=4,d.a.awrap(x.a.post("/api/comments",{imdbid:a.props.match.params.code,commentBody:a.state.comment}));case 4:if(200!==e.sent.status){e.next=8;break}return e.next=8,d.a.awrap(a.loadComments());case 8:return e.next=10,d.a.awrap(a.setState({comment:""}));case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),null,null,[[0,12]])},a.onChange=function(e){var t,n,s;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.target.name,n=e.target.value,s=Object(T.validateComment)(n),r.next=5,d.a.awrap(a.setState(Object(A.a)({},t,n)));case 5:a.state.error!==s&&a.setState({error:s});case 6:case"end":return r.stop()}}))},a.renderError=function(){return a.state.error?s.a.createElement("small",{className:"form-text h-error m-auto d-block"},a.state.error):null},a.addToWatchLater=function(){alert("Please remember to watch this later.")},a.loadComments=function(){var e,t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(e=a.props.match.params.code)){n.next=8;break}return n.next=5,d.a.awrap(x.a.get("/api/comments/".concat(e)));case 5:return t=n.sent,n.next=8,d.a.awrap(a.setState({commentsList:t.data.comments}));case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(0);case 12:case"end":return n.stop()}}),null,null,[[0,10]])},a.like=function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(x.a.post("/api/comments/vote",{commentId:e}));case 3:200===t.sent.status&&a.loadComments(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),null,null,[[0,7]])},a.visit=function(e){e&&a.props.history.push("/profile/".concat(e))},a.state={data:{},movie:"",comment:"",subtitles:[],error:"",checked:0,commentsList:[]},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,s,r,c;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,e=this.props.match.params.code,o.next=4,d.a.awrap(x.a.get("/api/movieInfos?imdb=".concat(e)));case 4:if((t=o.sent).data.data||this.props.history.push("/movies"),!t.data.data){o.next=9;break}return o.next=9,d.a.awrap(this.setState({data:t.data.data}));case 9:return o.next=11,d.a.awrap(this.loadComments());case 11:return o.next=13,d.a.awrap(x.a.get("/api/subtitles/search/".concat(e)));case 13:a=o.sent,n=a.data,s=n.subtitles,r=n.preferedLang,s.length>0&&(c=[],s.forEach((function(e){var t={kind:"subtitles",src:"/api/subtitles/load?path=".concat(e.path.split("/")[3]),srcLang:e.langShort};e.langShort===r&&(t.default=!0),c.push(t)})),this.setState({subtitles:c})),o.next=20;break;case 18:o.prev=18,o.t0=o.catch(0);case 20:case"end":return o.stop()}}),null,this,[[0,18]])}},{key:"render",value:function(){var e=this.props.match.params.code,t=this.state.subtitles;return 0===Object.keys(this.state.data).length?null:s.a.createElement("div",{className:"Moviespage"},s.a.createElement(W,null),s.a.createElement(S,null),s.a.createElement("div",{className:"movie-container",style:this.state.data.poster?{backgroundImage:"url(".concat(this.state.data.poster,")")}:{}},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12 col-sm-8 col-md-6 col-lg-4 m-auto"},s.a.createElement("div",{className:"movie-flyer",style:this.state.data.poster?{backgroundImage:"url(".concat(this.state.data.poster,")")}:{}})),s.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 col-lg-8 m-auto"},s.a.createElement("div",{className:"movie-data"},s.a.createElement("h1",{className:"title"},this.state.data.title),s.a.createElement("p",{className:"prodyear"},"Production year ",s.a.createElement("span",null,this.state.data.year)),s.a.createElement("p",{className:"rating"},"Rating ",s.a.createElement("span",null," ",this.state.data.rating," ")),s.a.createElement("p",{className:"description"}," ",this.state.data.description," "),s.a.createElement(Q,{genres:this.state.data.genres}),s.a.createElement("button",{onClick:this.addToWatchLater,className:"btn h-btn h-btn-primary h-fsize-1 ml-0"}," Add To Watch Later ")))))),s.a.createElement(re,{list:this.state.data.cast}),this.state.movie?s.a.createElement(oe.a,{url:"/api/streamvideo?hash=".concat(this.state.movie,"&imdbid=").concat(e),className:"w-100 h-100",controls:!0,config:{file:{tracks:t}},playing:!0}):null,s.a.createElement(te,{data:this.state.data.torrents,play:this.playMovie}),s.a.createElement(re,{list:this.state.data.crew}),s.a.createElement(ne,{commentsList:this.state.commentsList,like:this.like,visit:this.visit}),s.a.createElement("br",null),s.a.createElement("div",{className:"h-comment-new mb-5"},s.a.createElement("div",{className:"container"},s.a.createElement("input",{type:"text",placeholder:"Comment",name:"comment",value:this.state.comment,onChange:this.onChange}),this.renderError(),s.a.createElement("button",{className:"h-btn-bblock h-btn-primary mt-5",onClick:this.onComment}," comment "))))}}]),t}(n.Component),ie=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.awrap(x.a.get("/api/user"));case 3:200===e.sent.status?this.props.Authenticate(1):this.props.Authenticate(0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.Authenticate(0);case 10:case"end":return e.stop()}}),null,this,[[0,7]])}},{key:"render",value:function(){return s.a.createElement(n.Fragment,null,s.a.createElement(w.a,null,s.a.createElement(N.d,null,s.a.createElement(N.b,{exact:!0,path:"/",component:P}),s.a.createElement(N.b,{exact:!0,path:"/login",component:_}),s.a.createElement(N.b,{exact:!0,path:"/login/oauth/:platform",component:K}),s.a.createElement(N.b,{exact:!0,path:"/register",component:H}),s.a.createElement(N.b,{exact:!0,path:"/validate/:token",component:q}),s.a.createElement(N.b,{exact:!0,path:"/resetpassword/",component:z}),s.a.createElement(N.b,{exact:!0,path:"/resetpassword/:token",component:F}),s.a.createElement(N.b,{exact:!0,path:"/movies",component:X}),s.a.createElement(N.b,{exact:!0,path:"/movie/:code",component:le}),s.a.createElement(N.b,{exact:!0,path:"/profile",component:$}),s.a.createElement(N.b,{exact:!0,path:"/profile/:id",component:$}),s.a.createElement(N.b,{exact:!0,path:"/settings/password",component:J}),s.a.createElement(N.b,{exact:!0,path:"/settings",component:G}),s.a.createElement(N.b,{exact:!0,path:"/*",component:P}))),s.a.createElement(L,null))}}]),t}(n.Component),ue=Object(o.b)(null,(function(e){return{Authenticate:function(t){e({type:"AUTHENTICATE",payload:t})}}}))(ie);c.a.render(s.a.createElement(o.a,{store:p},s.a.createElement(ue,null)),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.6d252567.chunk.js.map